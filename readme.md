# Автотест с применением Selenium Webdriver и паттерна Pageobject.

## Выполненная работа кратко

1. Автоматизирована проверка трех сценариев, в т.ч. двух обязательных и одного дополнительного.
2. Автотесты реализованы на Python 3.11.9 и Selenium Webdriver 4.26.1.
3. В качестве тестового framework используется pytest 8.3.3.
4. Реализован паттерн PageObject, следующим образом:

   - _Locators.py_. Файл содержит локаторы двух классов:
     - `SbisPageLocators` для работы с сайтом <https://sbis.ru/>;
     - `TensorPageLocators` для работы с сайтом <https://tensor.ru/>;
   - _SbisPages.py_. Содержит класс `SbisPage` и методы для выполнения отдельных операций на сайте <https://sbis.ru/>;
   - _TensorPages.py_. Содержит класс `TensorPage` и методы для выполнения отдельных операций на сайте <https://tensor.ru/>;
   - _conftest.py_. Файл конфигурации pytest, где можно определить фикстуры и настройки, используемые в тестах;
   - _test1.py_. Файл с тестами по сценарию № 1;
   - _test2.py_. Файл с тестами по сценарию № 2;
   - _test3.py_. Файл с тестами по сценарию № 3.

5. Для выполнения тестов с генерацией html-отчета применяется pytest-html 4.1.1.
6. Готовый проект залит на github без кэшей, драйверов и виртуальных окружений. С открытым доступом на чтение.

## Подробное описание сценариев

Для себя конкретизировал сценарии и разбил на этапы следующим образом.

### Сценарий № 1.

1. Зайти на сайт <https://sbis.ru/>.
2. Перейти в раздел "Контакты"[^1].
3. Найти баннер "Тензор", т.е. проверить его наличие.
4. Кликнуть по баннеру "Тензор", тем самым перейти на <https://tensor.ru/>.
5. Проверить, что есть блок "Сила в людях".
6. Перейти в блоке "Сила в людях" в "Подробнее"[^2].
7. Проверить, что открылась страница <https://tensor.ru/about>.
8. Проверить, что есть раздел "Работаем".
9. Проверить, что у всех фотографии хронологии одинаковые высота (height) и ширина (width).

### Cценарий № 2.

1. Зайти на сайт <https://sbis.ru/>.
2. Перейти в раздел "Контакты"[^1].
3. Проверить, что определился свой регион - в моём случае Свердловская область, следующими этапами:
   - проверить URL;
   - проверить заголовок (название) страницы на вкладке браузера;
   - проверить название региона в блоке "Контакты" на странице.
4. Проверить, что есть блок со списком партнеров.
5. Проверить, что первый город в блоке списка партнеров соответствует выбранному региону - в моем случае Екатеринбург.
6. Проверить, что список партнеров имеет хотя бы один элемент, т.е. собственно содержит хотя бы одного партнера.
7. Нажать на название региона, чтобы появился список регионов для выбора[^3].
8. Нажать на "Камчатский край".
9. Проверить, что загрузилась страница с Камчатским краем:
   - проверить URL;
   - проверить заголовок (название) страницы на вкладке браузера;
   - проверить название региона в блоке "Контакты" на странице.
10. Проверить, что есть блок со списком партнеров.
11. Проверить, что первый город в блоке списка партнеров соответствует Камчатскому краю - Петропавловск-Камчатский.
12. Проверить, что список партнеров имеет хотя бы один элемент, т.е. собственно содержит хотя бы одного партнера.

### Сценарий № 3.

1. Зайти на сайт <https://sbis.ru/>.
2. Перейти в раздел "Контакты"[^1].
3. Проверить, есть ли в Footer'e кнопка "Скачать локальные версии".
4. Нажать на кнопку "Скачать локальные версии".
5. Скачать веб-установщик[^4] в папку с тестом.
6. Убедиться, что веб-установщик скачался.
7. Сравнить размер скачанного файла с размером, указанным на сайте.

## Примечания

- Тесты запускались из командной строки Windows, а также из терминала VS Code посредством команд `pytest test1.py`, `pytest test2.py`, `pytest test3.py`;
- для того, чтобы сгенерировать отчет:
  - для теста № 1 - выполнить в командной строке или терминале `pytest --html=report1.html --self-contained-html test1.py`;
  - для теста № 2 - `pytest --html=report2.html --self-contained-html test2.py`;
  - для теста № 3 - `pytest --html=report3.html --self-contained-html test3.py`;
- файлы отчетов выложены в репозитории в папке _reports_;
- тестовое задание в формате .pdf выложено в папке _task_;
- в папке *commented_code* содержатся файлы с комментариями практически к каждой строчке кода, поясняющие происходящее;
- в ряде случаев для поиска элементов предусмотрено не точное совпадение, а частичное. Например, при проверке региона "Камчатский край" предусмотрен поиск не по полному названию, а по части "Камчат" - для большей гибкости, например на случай, если вместо "Камчатский край" будет использовано слово "Камчатка";
- все тестовые методы написаны с оператором `assert` и текстом, который появляется в командной строке (терминале) в случае ошибки при вызове этого метода;
- в скриптах в папке *commented_code* предусмотрены заведомо ошибочные варианты тестов для проверки работоспособности кода. Например, разберем следующую часть кода:
  ```
  LOCATOR_TENSOR_BANNER = (By.XPATH, "//a[@href='https://tensor.ru/']") # локатор для поиска баннера Тензор.
  # ниже тестовый заведомо ошибочный локатор для проверки работоспособности теста
  # LOCATOR_TENSOR_BANNER = (By.XPATH, "//a[@href='https://faketensor.ru/']")
  ```
  Для того, чтобы применить ошибочный локатор для проверки теста, нужно поставить # перед правильным локатором, тем самым выключив его, и убрать # перед ошибочным, тем самым его включив:
  ```
  # LOCATOR_TENSOR_BANNER = (By.XPATH, "//a[@href='https://tensor.ru/']") # локатор для поиска баннера Тензор.
  # ниже тестовый заведомо ошибочный локатор для проверки работоспособности теста
  LOCATOR_TENSOR_BANNER = (By.XPATH, "//a[@href='https://faketensor.ru/']")
  ```
  При запуске test1.py с таким локатором тест не проходит, выдает ошибку: `FAILED test1.py::test_sbis_search - AssertionError: Error. Tensor banner is not found` То есть получена ожидаемая ошибка в связи с заведомо ошибочным локатором.

[^1]: Поскольку в задании не указано "найти кнопку "Контакты", я исходил из того, что отдельно тестировать наличие кнопки не нужно и можно одним этапом сразу найти и нажать на неё.
[^2]: Поскольку в задании не указано "найти кнопку "Подробнее", я исходил из того, что отдельно тестировать наличие кнопки не нужно и можно одним этапом сразу найти и нажать на неё.
[^3]: Поскольку в задании не указано найти кнопку с регионом, найти Камчатский край, а просто указано изменить регион на Камчатский край - я исходил из того, что отдельно тестировать наличие соответствующих элементов не нужно.
[^4]: Поскольку в задании не указано найти кнопку для скачивания СБИС-плагина, я исходил из того, что отдельно тестировать наличие кнопки не нужно и можно просто скачать СБИС-плагин.
